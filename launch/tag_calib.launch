<launch>
    <!-- load parameters -->
    <rosparam file="$(find det_data_handler)/config/tag/tag_settings.yaml" command="load" ns="apriltag_ros_continuous_node"/>
    <rosparam file="$(find det_data_handler)/config/tag/tags.yaml" command="load" ns="apriltag_ros_continuous_node"/>

    <!-- bring up cameras -->
    <include file="$(find det_data_handler)/launch/multiple_d435.launch" >
        <arg name="use_rviz" value="false"/>
    </include>
    <!-- setup tfs between cameras and lidars -->

    <!-- detect april tags -->
    <node pkg="apriltag_ros" type="apriltag_ros_continuous_node" clear_params="true" output="screen" name="apriltag_ros_continuous_node">
        <remap from="image_rect" to="/cam_1/color/image_raw" />
        <remap from="camera_info" to="/cam_1/color/camera_info" />
        <param name="camera_frame" type="str" value="cam_1_color_optical_frame" />
        <param name="publish_tag_detections_image" type="bool" value="true" />
    </node>

    <!-- rviz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find det_data_handler)/config/rviz/tag_calib.rviz"/>

</launch>
